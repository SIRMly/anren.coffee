<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache"/>
    <meta name="renderer" content="webkit"/>
    <meta name="author" content="SIRMly">
    <meta name="keywords" content="安仁乐道,H-COFFEE"/>
    <meta name="description" content="安仁乐道"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/style.css"/>
    <title>H-COFFEE</title>
</head>
<body>
<audio src="audio/bgm.mp3" loop preload="auto" id="bgm"></audio>
<div class="page hide" id="page0"></div>
<div class="page" id="page1">
    <img src="img/bg.png" alt=""/>
    <img src="img/word0.png" alt="" class="word word0"/>
    <img src="img/word1.png" alt="" class="word word1"/>
    <img src="img/word2.png" alt="" class="word word2"/>
    <img src="img/word3.png" alt="" class="word word3"/>
    <img src="img/word4.png" alt="" class="word word4"/>
    <img src="img/word5.png" alt="" class="word word5"/>
    <img src="img/word6.png" alt="" class="word word6"/>
    <img src="img/word7.png" alt="" class="word word7"/>
    <img src="img/word8.png" alt="" class="word word8"/>
    <img src="img/word9.png" alt="" class="word word9"/>
    <img src="img/word10.png" alt="" class="word word10"/>
    <img src="img/word11.png" alt="" class="word word11"/>
    <img src="img/word12.png" alt="" class="word word12"/>
    <img src="img/word13.png" alt="" class="word word13"/>
    <img src="img/word14.png" alt="" class="word word14"/>
    <img src="img/word15.png" alt="" class="word word15"/>
    <img src="img/word16.png" alt="" class="word word16"/>
    <img src="img/word17.png" alt="" class="word word17"/>
    <img src="img/word18.png" alt="" class="word word18"/>
</div>
<!--<div id="orientLayer" class="mod-orient-layer">-->
    <!--<div class="mod-orient-layer__content">-->
        <!--<i class="icon mod-orient-layer__icon-orient"></i>-->
        <!--<div class="mod-orient-layer__desc">为了更好的体验，请使用竖屏浏览</div>-->
    <!--</div>-->
<!--</div>-->
<script src="js/jquery.min.js"></script>
<script>
    ;(function ($){
        var click = "ontouchstart" in document ? "touchend" : "click";
        var winH = $(window).outerHeight();
        document.addEventListener("WeixinJSBridgeReady", function () {
        }, false);
        var bgm = document.getElementById("bgm");
        var imgs = [
        ];
        preload(imgs);
        function preload(imgs,proBox){
            var proNum = 0,
                    count = imgs.length,
                    proPercentage = 0;
            for(var i in imgs){
                var newImg = new Image();
                newImg.src = imgs[i];
                newImg.onload = function (){
                    proNum++;
                    proPercentage = Math.floor(proNum/count*100);
                    $("#progress").width(proPercentage+"%");
                    if(proNum>=count){
                        proPercentage=100;
//                        $("#page0").stop().fadeOut(500, function (){
//                            $("#page0").addClass("hide");
//                        });
//                        $("#page1").stop().fadeIn(300);
                        setTimeout(function(){
                            $(".music").addClass("play");
                            bgm.play();
                            WeixinJSBridge.invoke('getNetworkType', {}, function (e) {
                                bgm.play();
                            });
                        },100)
                    }
//                    proBox.html(proPercentage+"%");
                }
            }
        }

        for(var i=0; i<4; i++){
            console.log($(".word"+i).offset().top);
            if($(".word"+i).offset().top < 0.8*winH){
                $(".word"+i).addClass("show1");
            }
        }
        $(window).scroll(function (){
            $(".word").each(function (index, item){
                if(!$(this).hasClass("show1")){
                    if($(this).offset().top < $(window).scrollTop()+0.9*winH){
                        console.log(index)
                        $(this).addClass("show2");
                    }
                }
            })
        });
    })(jQuery);
</script>
</body>
</html>