<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache"/>
    <meta name="renderer" content="webkit"/>
    <meta name="author" content="SIRMly">
    <meta name="keywords" content="安仁乐道,H-COFFEE"/>
    <meta name="description" content="安仁乐道"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/style.css"/>
    <title>H-COFFEE</title>
</head>
<body>
<audio src="audio/bgm.mp3" loop preload="auto" id="bgm"></audio>
<div class="page" id="page0">
    <div class="page0-pic">
        <div class="smell"></div>
        <img src="img/loading.png" alt=""/>
    </div>
    <div class="progress"></div>
</div>
<div class="page hide" id="page1">
    <img src="img/bg.png" alt=""/>
    <img src="img/word0.png" alt="" class="word word0"/>
    <div class="word wordB word1">
        <img src="img/word1.png" alt=""/>
        <img src="img/word1-inner.png" alt="" class="word-inner word1-inner"/>
    </div>
    <div class="word wordB word2">
        <img src="img/word2.png" alt=""/>
        <img src="img/word2-inner.png" alt="" class="word-inner word2-inner"/>
    </div>
    <div class="word wordB word3">
        <img src="img/word3.png" alt=""/>
        <img src="img/word3-inner.png" alt="" class="word-inner word3-inner"/>
    </div>
    <div class="word wordB word4">
        <img src="img/word4.png" alt=""/>
        <img src="img/word4-inner.png" alt="" class="word-inner word4-inner"/>
    </div>
    <img src="img/word5.png" alt="" class="word word5"/>
    <img src="img/word6.png" alt="" class="word word6"/>
    <div class="word wordB word7">
        <img src="img/word7.png" alt=""/>
        <img src="img/word7-inner.png" alt="" class="word-inner word7-inner"/>
    </div>
    <div class="word wordB word8">
        <img src="img/word8.png" alt=""/>
        <img src="img/word8-inner.png" alt="" class="word-inner word8-inner"/>
    </div>
    <div class="word wordB word9">
        <img src="img/word9.png" alt=""/>
        <img src="img/word9-inner.png" alt="" class="word-inner word9-inner"/>
    </div>
    <img src="img/word10.png" alt="" class="word word10"/>
    <img src="img/word11.png" alt="" class="word word11"/>
    <div class="word wordB word12">
        <img src="img/word12.png" alt=""/>
        <img src="img/word12-inner.png" alt="" class="word-inner word12-inner"/>
    </div>
    <div class="word wordB word13">
        <img src="img/word13.png" alt=""/>
        <img src="img/word13-inner.png" alt="" class="word-inner word13-inner"/>
    </div>
    <div class="word wordB word14">
        <img src="img/word14.png" alt=""/>
        <img src="img/word14-inner.png" alt="" class="word-inner word14-inner"/>
    </div>
    <div class="word wordB word15">
        <img src="img/word15.png" alt=""/>
        <img src="img/word15-inner1.png" alt="" class="word-inner"/>
        <img src="img/word15-inner2.png" alt="" class="word-inner word-inner2"/>
    </div>
    <img src="img/word16.png" alt="" class="word word16"/>
    <div class="word wordB word17">
        <img src="img/word17.png" alt=""/>
        <img src="img/word17-inner.png" alt="" class="word-inner word17-inner"/>
    </div>
    <div class="word word18">
        <img src="img/word18.png" alt=""/>
        <img src="img/word18-inner.png" alt="" class="word-inner word18-inner"/>
    </div>
    <img src="img/word19.png" alt="" class="word word19"/>
    <img src="img/word20.png" alt="" class="word word20"/>
    <div class="music">
        <span></span>
    </div>
</div>
<!--<div id="orientLayer" class="mod-orient-layer">-->
    <!--<div class="mod-orient-layer__content">-->
        <!--<i class="icon mod-orient-layer__icon-orient"></i>-->
        <!--<div class="mod-orient-layer__desc">为了更好的体验，请使用竖屏浏览</div>-->
    <!--</div>-->
<!--</div>-->
<script src="js/jquery.min.js"></script>
<script>
    ;(function ($){
        var click = "ontouchstart" in document ? "touchend" : "click";
        var winH = $(window).outerHeight();
        document.addEventListener("WeixinJSBridgeReady", function () {
        }, false);
        var bgm = document.getElementById("bgm");
        var imgs = [
                "img/bg.png",
                "img/word0.png",
                "img/word1.png",
                "img/word1-inner.png",
                "img/word2-inner.png",
                "img/word3-inner.png",
                "img/word4-inner.png",
                "img/word7-inner.png",
                "img/word8-inner.png",
                "img/word9-inner.png",
                "img/word12-inner.png",
                "img/word13-inner.png",
                "img/word14-inner.png",
                "img/word15-inner1.png",
                "img/word15-inner2.png",
                "img/word17-inner.png",
                "img/word18-inner.png",
                "img/word2.png",
                "img/word3.png",
                "img/word4.png",
                "img/word5.png",
                "img/word6.png",
                "img/word7.png",
                "img/word8.png",
                "img/word9.png",
                "img/word10.png",
                "img/word11.png",
                "img/word12.png",
                "img/word13.png",
                "img/word14.png",
                "img/word15.png",
                "img/word16.png",
                "img/word17.png",
                "img/word18.png",
                "img/word19.png",
                "img/word20.png",
                "img/music-icon.png",
                "img/music-pause.png"
        ];
        preload(imgs,".progress");
        function preload(imgs,proBox){
            var proNum = 0,
                    count = imgs.length,
                    proPercentage = 0;
            for(var i in imgs){
                var newImg = new Image();
                newImg.src = imgs[i];
                newImg.onload = function (){
                    proNum++;
                    proPercentage = Math.floor(proNum/count*100);
                    $("#progress").width(proPercentage+"%");
                    if(proNum>=count){
                        proPercentage=100;
                        $("#page0").stop().fadeOut(500, function (){
                            $("#page0").addClass("hide");
                        });
                        $("#page1").stop().fadeIn(300);
                        setTimeout(function(){
                            $(".music").addClass("play");
                            bgm.play();
                            WeixinJSBridge.invoke('getNetworkType', {}, function (e) {
                                bgm.play();
                            });
                        },100)
                    }
                    $(proBox).html(proPercentage+"%");
                }
            }
        }
        $(".music").on(click, function (){
            if(bgm.paused){
                bgm.play();
                $(".music").addClass("play");
            }else{
                bgm.pause();
                $(".music").removeClass("play");
            }
        });

        for(var i=0; i<4; i++){
            if($(".word"+i).offset().top < 0.8*winH){
                $(".word"+i).addClass("show1");
            }
        }
        $(window).scroll(function (){
            $(".word").each(function (index, item){
                if(!$(this).hasClass("show1")){
                    if($(this).offset().top < $(window).scrollTop()+0.9*winH){
                        $(this).addClass("show2");
                    }
                }
            })
        });
    })(jQuery);
</script>
</body>
</html>